{"ast":null,"code":"const initialState = {\n  items: [{\n    id: 1,\n    imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n    name: 'IphoneX',\n    count: 20,\n    size: {\n      width: 200,\n      height: 200\n    },\n    weight: 200,\n    comments: [{\n      id: 1,\n      productId: 1,\n      description: 'some text here1',\n      date: '14:00 22.08.2021'\n    }, {\n      id: 2,\n      productId: 1,\n      description: 'some text here2',\n      date: '14:00 22.08.2021'\n    }],\n    description: 'The best proposition',\n    collar: 'red'\n  }, {\n    id: 2,\n    imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n    name: 'IphoneXS',\n    count: 15,\n    size: {\n      width: 200,\n      height: 200\n    },\n    weight: 200,\n    comments: [{\n      id: 1,\n      productId: 2,\n      description: 'some text here',\n      date: '14:00 22.08.2021'\n    }, {\n      id: 2,\n      productId: 2,\n      description: 'some text here',\n      date: '14:00 22.08.2021'\n    }],\n    description: 'The best proposition',\n    collar: 'red'\n  }, {\n    id: 3,\n    imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n    name: 'Iphone12',\n    count: 30,\n    size: {\n      width: 200,\n      height: 200\n    },\n    weight: 200,\n    comments: [{\n      id: 1,\n      productId: 3,\n      description: 'some text here',\n      date: '14:00 22.08.2021'\n    }, {\n      id: 2,\n      productId: 3,\n      description: 'some text here',\n      date: '14:00 22.08.2021'\n    }],\n    description: 'The best proposition',\n    collar: 'red'\n  }],\n  item: null\n};\n\nfunction assignObjects(dest, ...objects) {\n  for (let obj of objects) {\n    if (typeof obj != 'object') continue;\n\n    for (let prop in obj) {\n      if (Array.isArray(obj[prop])) {\n        dest[prop] = [...obj[prop]];\n      } else if (typeof obj[prop] == 'object') {\n        dest[prop] = assignObjects({}, obj[prop]);\n      } else {\n        dest[prop] = obj[prop];\n      }\n    }\n  }\n\n  return dest;\n}\n\nexport const itemsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'DELETE_ITEM':\n      return { ...state,\n        items: state.items.filter(item => item.id !== action.itemId)\n      };\n\n    case 'ADD_ITEM':\n      let last = state.items.length - 1;\n      let item = {\n        id: state.items[last] ? state.items[last].id + 1 : 1,\n        imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n        name: action.data.name,\n        count: action.data.count,\n        size: {\n          width: action.data.width,\n          height: action.data.height\n        },\n        weight: action.data.weight,\n        comments: [],\n        description: action.data.description,\n        collar: action.data.collar\n      };\n      return { ...state,\n        items: [...state.items, item]\n      };\n\n    case 'SET_ITEM':\n      return { ...state,\n        item: state.items[action.id]\n      };\n\n    case 'UPDATE_ITEM':\n      return { ...state // items: [...state.items , ...action.data]\n\n      };\n    // case ADD_COMMENT:\n    //     let comment = {\n    //         id: 1,\n    //         productId: 1,\n    //         description: 'some text here',\n    //         date: '14:00 22.08.2021'\n    //     }\n    //     return {\n    //         ...state,\n    //         item: [...state.item.comments, comment]\n    //     }\n\n    case 'DELETE_COMMENT':\n      const updatedState = assignObjects({}, state); // updatedState.item.comments = updatedState.item.comments.filter((comment: itemType )=> comment.id !== action.id)\n\n      updatedState.items[action.productId - 1] = updatedState.items[action.productId - 1].comments.filter(comment => comment.id !== action.id);\n      return { ...updatedState\n      };\n\n    default:\n      return state;\n  }\n};\nexport const actions = {\n  deleteItem: itemId => ({\n    type: 'DELETE_ITEM',\n    itemId\n  }),\n  addItem: data => ({\n    type: 'ADD_ITEM',\n    data\n  }),\n  setItem: id => ({\n    type: 'SET_ITEM',\n    id\n  }),\n  deleteComment: (id, productId) => ({\n    type: 'DELETE_COMMENT',\n    id,\n    productId\n  }),\n  addComment: data => ({\n    type: 'ADD_COMMENT',\n    data\n  }),\n  updateItem: data => ({\n    type: 'UPDATE_ITEM',\n    data\n  })\n};","map":{"version":3,"sources":["/Users/v.yakovenko/Desktop/max/my-project/src/Redux/items-reducer.tsx"],"names":["initialState","items","id","imageUrl","name","count","size","width","height","weight","comments","productId","description","date","collar","item","assignObjects","dest","objects","obj","prop","Array","isArray","itemsReducer","state","action","type","filter","itemId","last","length","data","updatedState","comment","actions","deleteItem","addItem","setItem","deleteComment","addComment","updateItem"],"mappings":"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","sourcesContent":["import {InferActionsType} from \"./redux-store\";\nimport {commentsType, itemType} from \"../types/types\";\n\n\nconst initialState = {\n    items: [{\n        id: 1,\n        imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n        name: 'IphoneX',\n        count: 20,\n        size: {\n            width: 200,\n            height: 200\n        },\n        weight: 200,\n        comments: [\n            {\n                id: 1,\n                productId: 1,\n                description: 'some text here1',\n                date: '14:00 22.08.2021'\n            },\n            {\n                id: 2,\n                productId: 1,\n                description: 'some text here2',\n                date: '14:00 22.08.2021'\n            }\n        ] as Array<commentsType>,\n        description: 'The best proposition',\n        collar: 'red'\n    },\n        {\n            id: 2,\n            imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n            name: 'IphoneXS',\n            count: 15,\n            size: {\n                width: 200,\n                height: 200\n            },\n            weight: 200,\n            comments: [\n                {\n                    id: 1,\n                    productId: 2,\n                    description: 'some text here',\n                    date: '14:00 22.08.2021'\n                },\n                {\n                    id: 2,\n                    productId: 2,\n                    description: 'some text here',\n                    date: '14:00 22.08.2021'\n                }\n            ] as Array<commentsType>,\n            description: 'The best proposition',\n            collar: 'red'\n        },\n        {\n            id: 3,\n            imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n            name: 'Iphone12',\n            count: 30,\n            size: {\n                width: 200,\n                height: 200\n            },\n            weight: 200,\n            comments: [{\n                id: 1,\n                productId: 3,\n                description: 'some text here',\n                date: '14:00 22.08.2021'\n            },\n                {\n                    id: 2,\n                    productId: 3,\n                    description: 'some text here',\n                    date: '14:00 22.08.2021'\n                }] as Array<commentsType>,\n            description: 'The best proposition',\n            collar: 'red'\n        }\n    ] as Array<itemType>,\n    item: null as itemType | null\n}\n\ntype InitialStateType = typeof initialState\ntype ActionsType = InferActionsType<typeof actions>\n\nfunction assignObjects(dest: any, ...objects: any) {\n    for (let obj of objects) {\n        if (typeof obj != 'object') continue;\n        for (let prop in obj) {\n            if (Array.isArray(obj[prop])) {\n                dest[prop] = [...obj[prop]]\n            } else if (typeof obj[prop] == 'object') {\n                dest[prop] = assignObjects({}, obj[prop])\n            } else {\n                dest[prop] = obj[prop]\n            }\n        }\n    }\n    return dest;\n}\n\nexport const itemsReducer = (state = initialState, action: ActionsType): InitialStateType => {\n    switch (action.type) {\n        case 'DELETE_ITEM' :\n            return {\n                ...state,\n                items: state.items.filter(item => item.id !== action.itemId)\n            }\n        case 'ADD_ITEM':\n            let last = state.items.length - 1\n            let item = {\n                id: state.items[last] ? state.items[last].id + 1 : 1,\n                imageUrl: 'https://images.unsplash.com/photo-1580910051074-3eb694886505?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NHx8cGhvbmV8ZW58MHx8MHx8&ixlib=rb-1.2.1&w=1000&q=80',\n                name: action.data.name,\n                count: action.data.count,\n                size: {\n                    width: action.data.width,\n                    height: action.data.height\n                },\n                weight: action.data.weight,\n                comments: [],\n                description: action.data.description,\n                collar: action.data.collar,\n            }\n            return {\n                ...state,\n                items: [...state.items, item]\n            }\n        case 'SET_ITEM':\n            return {\n                ...state,\n                item: state.items[action.id]\n            }\n        case 'UPDATE_ITEM':\n            return {\n                ...state,\n                // items: [...state.items , ...action.data]\n            }\n        // case ADD_COMMENT:\n        //     let comment = {\n        //         id: 1,\n        //         productId: 1,\n        //         description: 'some text here',\n        //         date: '14:00 22.08.2021'\n        //     }\n        //     return {\n        //         ...state,\n        //         item: [...state.item.comments, comment]\n        //     }\n        case 'DELETE_COMMENT':\n            const updatedState = assignObjects({}, state)\n            // updatedState.item.comments = updatedState.item.comments.filter((comment: itemType )=> comment.id !== action.id)\n            updatedState.items[action.productId - 1] = updatedState.items[action.productId - 1].comments.filter((comment: itemType )=> comment.id !== action.id)\n            return {\n                ...updatedState\n            }\n        default:\n            return state\n    }\n}\n\nexport const actions = {\n    deleteItem: (itemId: number) => ({type: 'DELETE_ITEM', itemId} as const),\n    addItem: (data: any) => ({type: 'ADD_ITEM', data} as const),\n    setItem: (id: number) => ({type: 'SET_ITEM', id} as const),\n    deleteComment: (id: number, productId: number) => ({type: 'DELETE_COMMENT', id, productId} as const),\n    addComment: (data: any) => ({type: 'ADD_COMMENT', data} as const),\n    updateItem: (data: any) => ({type: 'UPDATE_ITEM', data} as const)\n}"]},"metadata":{},"sourceType":"module"}